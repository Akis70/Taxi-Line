<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taxi-Line | Î£ÏÎ½Î´ÎµÏƒÎ·</title>
    <style>
        :root { --primary: #f1c40f; --secondary: #2c3e50; --bg: #f4f4f4; --card: #ffffff; --text: #333; }
        body.dark-mode { --bg: #1a1a1a; --card: #2d2d2d; --text: #f4f4f4; }
        
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; transition: 0.3s; }
        .card { background: var(--card); padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 350px; text-align: center; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; background: var(--card); color: var(--text); }
        .btn { background: var(--primary); color: #000; border: none; padding: 15px; width: 100%; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 10px; }
        .btn:hover { opacity: 0.9; }
        .link { display: block; margin-top: 15px; color: #7f8c8d; text-decoration: none; font-size: 14px; }
        #recaptcha-container { margin-top: 10px; }
    </style>
</head>
<body>

    <div class="card">
        <h2 style="color:var(--primary)">ğŸš• Taxi-Line</h2>
        <p>Î£ÏÎ½Î´ÎµÏƒÎ· ÏƒÏ„Î·Î½ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±</p>
        
        <input type="email" id="login-email" placeholder="Email">
        <input type="password" id="login-password" placeholder="ÎšÏ‰Î´Î¹ÎºÏŒÏ‚">
        
        <div id="recaptcha-container"></div>

        <button class="btn" onclick="login()">Î£Î¥ÎÎ”Î•Î£Î—</button>
        
        <a href="signup.html" class="link">Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ; Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÎµÎ´Ï</a>
        <button onclick="toggleTheme()" style="background:none; border:none; cursor:pointer; margin-top:10px;">ğŸŒ“ Î‘Î»Î»Î±Î³Î® Î˜Î­Î¼Î±Ï„Î¿Ï‚</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCCzXoeqv3VODlSH6j3HrqI36ixYYdEjjI",
            authDomain: "taxi-line-f149e.firebaseapp.com",
            databaseURL: "https://taxi-line-f149e-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "taxi-line-f149e",
            storageBucket: "taxi-line-f149e.firebasestorage.app",
            messagingSenderId: "1086896421565",
            appId: "1:1086896421565:web:e498b8916fd95a04e7d5d4"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Initialize reCAPTCHA
        window.onload = function() {
            window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
                'size': 'invisible'
            });
        };

        async function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            if (!email || !password) {
                alert("Î Î±ÏÎ±ÎºÎ±Î»Ï ÏƒÏ…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ ÏŒÎ»Î± Ï„Î± Ï€ÎµÎ´Î¯Î±.");
                return;
            }

            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                const user = userCredential.user;

                // --- Î•Î›Î•Î“Î§ÎŸÎ£ EMAIL VERIFICATION ---
                // Î‘Î½ Î¸Î­Î»ÎµÎ¹Ï‚ Î½Î± Î¼Ï€Î±Î¯Î½ÎµÎ¹Ï‚ Ï‡Ï‰ÏÎ¯Ï‚ ÎµÏ€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î³Î¹Î± Î´Î¿ÎºÎ¹Î¼Î­Ï‚, 
                // Î¬Î»Î»Î±Î¾Îµ Ï„Î¿ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÏƒÎµ: if (true)
                if (user.emailVerified || email === "akisss70@gmail.com") {
                    window.location.href = "dashboard.html";
                } else {
                    alert("Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î²ÎµÎ²Î±Î¹ÏÏƒÏ„Îµ Ï„Î¿ email ÏƒÎ±Ï‚! Î•Î»Î­Î³Î¾Ï„Îµ ÎºÎ±Î¹ Ï„Î± Spam.");
                    await auth.signOut();
                }
            } catch (error) {
                alert("Î£Ï†Î¬Î»Î¼Î± ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚: " + error.message);
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }
        if (localStorage.getItem('darkMode') === 'true') document.body.classList.add('dark-mode');
    </script>
</body>
</html>
