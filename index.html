<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taxi-Line | Î£ÏÎ½Î´ÎµÏƒÎ·</title>
    <style>
        :root { --primary: #f1c40f; --secondary: #2c3e50; --text: #333; --bg: #f4f4f4; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; flex-direction: column; }
        .login-container { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 350px; text-align: center; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.3s; margin-top: 10px; }
        .btn-login { background: var(--primary); color: black; }
        .btn-login:hover { background: #d4af37; }
        .lang-switch { position: absolute; top: 20px; right: 20px; }
        .lang-btn { background: var(--secondary); color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        a { color: var(--secondary); text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>

    <div class="lang-switch">
        <button id="lang-toggle" class="lang-btn" onclick="toggleLanguage()">EN</button>
    </div>

    <div class="login-container">
        <h2 id="login-title">ğŸš• Taxi-Line</h2>
        <p id="login-subtitle">Î£ÏÎ½Î´ÎµÏƒÎ· ÏƒÏ„Î·Î½ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±</p>
        
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="ÎšÏ‰Î´Î¹ÎºÏŒÏ‚">
        
        <div id="recaptcha-container"></div>

        <button id="login-btn" class="btn btn-login" onclick="login()">Î£Î¥ÎÎ”Î•Î£Î—</button>
        
        <p style="margin-top:20px;">
            <span id="no-account">Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ;</span> <br>
            <a href="signup.html" id="register-link">Î•Î³Î³ÏÎ±Ï†Î® ÎµÎ´Ï</a>
        </p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCCzXoeqv3VODlSH6j3HrqI36ixYYdEjjI",
            authDomain: "taxi-line-f149e.firebaseapp.com",
            databaseURL: "https://taxi-line-f149e-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "taxi-line-f149e",
            storageBucket: "taxi-line-f149e.firebasestorage.app",
            messagingSenderId: "1086896421565",
            appId: "1:1086896421565:web:e498b8916fd95a04e7d5d4"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // --- Î“Î›Î©Î£Î£Î‘ ---
        let currentLang = localStorage.getItem('appLang') || 'el';
        const translations = {
            el: { langBtn: "EN", title: "ğŸš• Taxi-Line", sub: "Î£ÏÎ½Î´ÎµÏƒÎ· ÏƒÏ„Î·Î½ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±", email: "Email", pass: "ÎšÏ‰Î´Î¹ÎºÏŒÏ‚", login: "Î£Î¥ÎÎ”Î•Î£Î—", noAcc: "Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ;", reg: "Î•Î³Î³ÏÎ±Ï†Î® ÎµÎ´Ï" },
            en: { langBtn: "GR", title: "ğŸš• Taxi-Line", sub: "Login to service", email: "Email", pass: "Password", login: "LOGIN", noAcc: "Don't have an account?", reg: "Register here" }
        };

        function toggleLanguage() {
            currentLang = (currentLang === 'el') ? 'en' : 'el';
            localStorage.setItem('appLang', currentLang);
            applyLanguage();
        }

        function applyLanguage() {
            const t = translations[currentLang];
            document.getElementById('lang-toggle').innerText = t.langBtn;
            document.getElementById('login-title').innerText = t.title;
            document.getElementById('login-subtitle').innerText = t.sub;
            document.getElementById('email').placeholder = t.email;
            document.getElementById('password').placeholder = t.pass;
            document.getElementById('login-btn').innerText = t.login;
            document.getElementById('no-account').innerText = t.noAcc;
            document.getElementById('register-link').innerText = t.reg;
        }
        applyLanguage();

        // --- reCAPTCHA ---
        window.onload = function() {
            window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
                'size': 'invisible'
            });
        };

        // --- LOGIN ---
        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (email === "" || password === "") {
                alert(currentLang === 'el' ? "Î£Ï…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ ÏŒÎ»Î± Ï„Î± Ï€ÎµÎ´Î¯Î±!" : "Fill all fields!");
                return;
            }

            auth.signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
                // Î— Î±Î½Î±ÎºÎ±Ï„ÎµÏÎ¸Ï…Î½ÏƒÎ· Î³Î¯Î½ÎµÏ„Î±Î¹ ÏƒÏ„Î¿ Dashboard. 
                // Î•ÎºÎµÎ¯ Î¸Î± Î³Î¯Î½ÎµÎ¹ Î¿ Î­Î»ÎµÎ³Ï‡Î¿Ï‚ Î³Î¹Î± Ï„Î¿ email verification.
                window.location.href = "dashboard.html";
            })
            .catch((error) => {
                alert(currentLang === 'el' ? "Î›Î¬Î¸Î¿Ï‚ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î±: " + error.message : "Error: " + error.message);
                if (window.recaptchaVerifier) window.recaptchaVerifier.render().then(id => grecaptcha.reset(id));
            });
        }
    </script>
</body>
</html>
